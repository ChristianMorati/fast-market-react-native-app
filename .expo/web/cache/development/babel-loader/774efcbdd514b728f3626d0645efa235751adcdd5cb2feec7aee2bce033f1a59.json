{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { colors, globalStyles } from \"../../../global-styles\";\nimport Ionicons from '@expo/vector-icons/Ionicons';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { useProductContext } from \"../../../contexts/product-context\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ProductItem = function ProductItem(_ref) {\n  var item = _ref.item;\n  var productContext = useProductContext();\n  return _jsxs(View, {\n    style: styles.productContainer,\n    children: [_jsx(Image, {\n      source: {\n        uri: item == null ? void 0 : item.img\n      },\n      style: styles.image\n    }), _jsx(Text, {\n      style: styles.description,\n      numberOfLines: 2,\n      ellipsizeMode: \"middle\",\n      children: item == null ? void 0 : item.description.toUpperCase()\n    }), _jsxs(View, {\n      style: styles.priceContainer,\n      children: [_jsx(Text, {\n        style: styles.price,\n        children: productContext.formatToCurrency(item == null ? void 0 : item.price)\n      }), productContext.cartProducts.length < 9 ? _jsx(TouchableOpacity, {\n        style: [globalStyles.button, styles.addToCart],\n        onPress: function onPress() {\n          return productContext.handleAddProductToCart(item);\n        },\n        children: _jsx(FontAwesome, {\n          name: \"cart-arrow-down\",\n          size: 16,\n          color: \"white\"\n        })\n      }) : _jsxs(Text, {\n        style: [globalStyles.button, styles.fullCart],\n        children: [_jsx(Ionicons, {\n          name: \"md-cart-outline\",\n          size: 14,\n          color: \"white\"\n        }), \" Cheio\"]\n      })]\n    })]\n  });\n};\nvar FeaturedProducts = function FeaturedProducts() {\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoadingProducts = _useState2[0],\n    setIsLoadingProducts = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    products = _useState4[0],\n    setProducts = _useState4[1];\n  var productContext = useProductContext();\n  useEffect(function () {\n    loadProducts();\n  }, []);\n  var loadProducts = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var response = yield fetch(\"http://localhost:3000/product\");\n        var data = yield response.json();\n        productContext.setProducts(data);\n        setProducts(data);\n        return _jsxs(View, {\n          style: styles.container,\n          children: [_jsx(Text, {\n            style: [styles.title],\n            children: \"Produtos em Destaque\"\n          }), _jsx(View, {\n            style: styles.container,\n            children: _jsx(FlatList, {\n              data: products,\n              renderItem: function renderItem(_ref3) {\n                var item = _ref3.item;\n                return _jsx(ProductItem, {\n                  item: item\n                });\n              },\n              keyExtractor: function keyExtractor(item) {\n                return item.code;\n              },\n              contentContainerStyle: null,\n              numColumns: 2\n            })\n          })]\n        });\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n      } finally {\n        setIsLoadingProducts(false);\n      }\n    });\n    return function loadProducts() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingTop: 6,\n    height: 'auto',\n    paddingHorizontal: 6,\n    paddingBottom: 6\n  },\n  image: {\n    height: 140,\n    resizeMode: 'contain',\n    borderTopRightRadius: 12,\n    borderTopLeftRadius: 12,\n    backgroundColor: 'white'\n  },\n  productContainer: {\n    flex: 1,\n    flexDirection: 'column',\n    backgroundColor: colors.productFooter,\n    margin: 3,\n    paddingBottom: 6,\n    borderRadius: 12,\n    borderWidth: .4,\n    borderColor: 'black'\n  },\n  containerReload: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 16\n  },\n  title: {\n    fontWeight: '500',\n    fontSize: 18,\n    color: colors.title,\n    paddingLeft: 4\n  },\n  description: {\n    fontSize: 11,\n    textAlign: 'center',\n    paddingHorizontal: 2,\n    fontWeight: '500'\n  },\n  priceContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 10,\n    paddingVertical: 4\n  },\n  price: {\n    fontSize: 14,\n    fontWeight: 'bold'\n  },\n  disabledButton: {\n    backgroundColor: 'black'\n  },\n  messageError: {\n    marginLeft: 14,\n    fontWeight: '500',\n    fontSize: 18,\n    color: 'red'\n  },\n  addToCart: {\n    backgroundColor: '#7D0E7C',\n    paddingHorizontal: 12,\n    paddingVertical: 6\n  },\n  fullCart: {\n    backgroundColor: '#7D0E7C',\n    color: 'white'\n  }\n});\nexport default FeaturedProducts;","map":{"version":3,"names":["React","useEffect","useState","View","Text","Image","StyleSheet","TouchableOpacity","FlatList","colors","globalStyles","Ionicons","FontAwesome","useProductContext","jsx","_jsx","jsxs","_jsxs","ProductItem","_ref","item","productContext","style","styles","productContainer","children","source","uri","img","image","description","numberOfLines","ellipsizeMode","toUpperCase","priceContainer","price","formatToCurrency","cartProducts","length","button","addToCart","onPress","handleAddProductToCart","name","size","color","fullCart","FeaturedProducts","_useState","_useState2","_slicedToArray","isLoadingProducts","setIsLoadingProducts","_useState3","_useState4","products","setProducts","loadProducts","_ref2","_asyncToGenerator","response","fetch","data","json","container","title","renderItem","_ref3","keyExtractor","code","contentContainerStyle","numColumns","error","console","apply","arguments","create","flex","paddingTop","height","paddingHorizontal","paddingBottom","resizeMode","borderTopRightRadius","borderTopLeftRadius","backgroundColor","flexDirection","productFooter","margin","borderRadius","borderWidth","borderColor","containerReload","justifyContent","alignItems","marginTop","fontWeight","fontSize","paddingLeft","textAlign","paddingVertical","disabledButton","messageError","marginLeft"],"sources":["/home/dev/Documents/projects/react native/fast-market-react-native-app-main/src/app/components/products/featured-products/featured-products.tsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { View, Text, Image, StyleSheet, TouchableOpacity, FlatList } from 'react-native';\nimport { colors, globalStyles } from '../../../global-styles';\nimport Product from '../../../models/productModel';\nimport Ionicons from '@expo/vector-icons/Ionicons';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { useProductContext } from '../../../contexts/product-context';\n\n\ninterface ProductItemProps {\n    item: Product;\n}\n\nconst ProductItem: React.FC<ProductItemProps> = ({ item }) => {\n    const productContext = useProductContext();\n\n    return (\n        <View style={styles.productContainer}>\n            <Image\n                source={{ uri: item?.img }}\n                style={styles.image}\n            />\n            <Text style={styles.description} numberOfLines={2} ellipsizeMode=\"middle\">{item?.description.toUpperCase()}</Text>\n            <View style={styles.priceContainer}>\n                <Text style={styles.price}>{productContext.formatToCurrency(item?.price)}</Text>\n\n                {productContext.cartProducts.length < 9 ? (\n                    <TouchableOpacity\n                        style={[globalStyles.button, styles.addToCart]}\n                        onPress={() => productContext.handleAddProductToCart(item)}\n                    >\n                        <FontAwesome name=\"cart-arrow-down\" size={16} color=\"white\" />\n                    </TouchableOpacity>\n                ) : <Text style={[globalStyles.button, styles.fullCart]}>\n                    <Ionicons name=\"md-cart-outline\" size={14} color=\"white\" /> Cheio</Text>}\n            </View>\n        </View>\n    );\n};\n\nconst FeaturedProducts: React.FC = () => {\n    const [isLoadingProducts, setIsLoadingProducts] = useState(true);\n    const [products, setProducts] = useState<Product[]>([]); // Assuming Product is your data structure\n    const productContext = useProductContext();\n\n    useEffect(() => {\n        loadProducts();\n    }, []); // Run loadProducts only once on initial render\n\n    const loadProducts = async () => {\n        try {\n            const response = await fetch(\"http://localhost:3000/product\");\n            const data = await response.json();\n            productContext.setProducts(data); // Update context state\n            setProducts(data); // Update local state\n            return (\n                <View style={styles.container}>\n                    <Text style={[styles.title]}>Produtos em Destaque</Text>\n                    <View style={styles.container}>\n                        <FlatList\n                            data={products}\n                            renderItem={({ item }) => <ProductItem item={item} />}\n                            keyExtractor={(item) => item.code}\n                            contentContainerStyle={null}\n                            numColumns={2}\n                        />\n                    </View>\n                </View>\n            );\n        } catch (error) {\n            console.error(\"Error fetching products:\", error);\n            // Handle error appropriately, e.g., display an error message\n        } finally {\n            setIsLoadingProducts(false); // Set loading to false regardless of success or failure\n        }\n    };\n}\n\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        paddingTop: 6,\n        height: 'auto',\n        paddingHorizontal: 6,\n        paddingBottom: 6,\n    },\n    image: {\n        height: 140,\n        resizeMode: 'contain',\n        borderTopRightRadius: 12,\n        borderTopLeftRadius: 12,\n        backgroundColor: 'white',\n    },\n    productContainer: {\n        flex: 1,\n        flexDirection: 'column',\n        backgroundColor: colors.productFooter,\n        margin: 3,\n        paddingBottom: 6,\n        borderRadius: 12,\n        borderWidth: .4,\n        borderColor: 'black',\n    },\n    containerReload: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginTop: 16,\n    },\n    title: {\n        fontWeight: '500',\n        fontSize: 18,\n        color: colors.title,\n        paddingLeft: 4,\n    },\n    description: {\n        fontSize: 11,\n        textAlign: 'center',\n        paddingHorizontal: 2,\n        fontWeight: '500',\n    },\n    priceContainer: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        paddingHorizontal: 10,\n        paddingVertical: 4,\n    },\n    price: {\n        fontSize: 14,\n        fontWeight: 'bold',\n    },\n    disabledButton: {\n        backgroundColor: 'black',\n    },\n    messageError: {\n        marginLeft: 14,\n        fontWeight: '500',\n        fontSize: 18,\n        color: 'red',\n    },\n    addToCart: {\n        backgroundColor: '#7D0E7C',\n        paddingHorizontal: 12,\n        paddingVertical: 6\n    },\n    fullCart: {\n        backgroundColor: '#7D0E7C',\n        color: 'white',\n    }\n});\n\nexport default FeaturedProducts;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}