{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { createContext, useEffect, useState } from 'react';\nimport Toast from 'react-native-toast-message';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var ProductContext = createContext({});\nexport default function ProductProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    sumProducts = _useState2[0],\n    setSumProducts = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    cartProducts = _useState4[0],\n    setCartProducts = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isScannerAlive = _useState6[0],\n    setIsScannerAlive = _useState6[1];\n  var _useState7 = useState(undefined),\n    _useState8 = _slicedToArray(_useState7, 2),\n    products = _useState8[0],\n    setProducts = _useState8[1];\n  var _useState9 = useState(undefined),\n    _useState10 = _slicedToArray(_useState9, 2),\n    product = _useState10[0],\n    setProduct = _useState10[1];\n  useEffect(function () {\n    var total = cartProducts.reduce(function (accumulator, product) {\n      return accumulator + product.price;\n    }, 0);\n    setSumProducts(Number(total.toFixed(2)));\n  }, [cartProducts]);\n  var host = \"http://localhost:3000\";\n  var BaseUrlApi = `${host}/product`;\n  var LoadProducts = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var response = yield fetch(\"http://localhost:3000/product\");\n        var data = yield response.json();\n        console.error(data);\n        setProducts(data);\n        return products;\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n        setProducts(undefined);\n        return undefined;\n      }\n    });\n    return function LoadProducts() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    LoadProducts();\n  }, []);\n  var getProductByCode = function () {\n    var _ref3 = _asyncToGenerator(function* (code) {\n      try {\n        var response = yield fetch(`${BaseUrlApi}/code/${code}`);\n        var _product = yield response.json();\n        setProduct(_product);\n        return _product;\n      } catch (error) {\n        console.error(\"Error fetching product by code:\", error);\n        return undefined;\n      }\n    });\n    return function getProductByCode(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var showToast = function showToast(type, text1, text2) {\n    Toast.show({\n      type: type,\n      text1: text1,\n      text2: text2,\n      visibilityTime: 3000,\n      autoHide: true,\n      text1Style: {\n        fontSize: 16,\n        fontWeight: 'bold'\n      },\n      text2Style: {\n        fontSize: 14,\n        fontWeight: '500'\n      }\n    });\n  };\n  var handleAddProductToCart = function handleAddProductToCart(newProduct) {\n    if (cartProducts.some(function (product) {\n      return product.code === newProduct.code;\n    })) {\n      return showToast('error', 'OPS!', 'Este produto já foi adicionado ao carrinho.');\n    }\n    setCartProducts(function (prevCartProducts) {\n      return [newProduct].concat(_toConsumableArray(prevCartProducts));\n    });\n    return showToast('success', 'Sucesso!', 'Produto adicionado ao carrinho!');\n  };\n  var handleRemoveFromCart = function handleRemoveFromCart(toRemoveProduct) {\n    setCartProducts(function (prevCartProducts) {\n      return prevCartProducts.filter(function (product) {\n        return product.code !== toRemoveProduct.code;\n      });\n    });\n  };\n  var formatToCurrency = function formatToCurrency(value) {\n    return value.toLocaleString('pt-BR', {\n      style: 'currency',\n      currency: 'BRL'\n    });\n  };\n  return _jsx(ProductContext.Provider, {\n    value: {\n      isScannerAlive: isScannerAlive,\n      sumProducts: sumProducts,\n      cartProducts: cartProducts,\n      product: product,\n      setProduct: setProduct,\n      products: products,\n      setProducts: setProducts,\n      getProductByCode: getProductByCode,\n      LoadProducts: LoadProducts,\n      setIsScannerAlive: setIsScannerAlive,\n      showToast: showToast,\n      handleAddProductToCart: handleAddProductToCart,\n      handleRemoveFromCart: handleRemoveFromCart,\n      formatToCurrency: formatToCurrency\n    },\n    children: children\n  });\n}\n;\nexport function useProductContext() {\n  var context = React.useContext(ProductContext);\n  return context;\n}","map":{"version":3,"names":["React","createContext","useEffect","useState","Toast","jsx","_jsx","ProductContext","ProductProvider","_ref","children","_useState","_useState2","_slicedToArray","sumProducts","setSumProducts","_useState3","_useState4","cartProducts","setCartProducts","_useState5","_useState6","isScannerAlive","setIsScannerAlive","_useState7","undefined","_useState8","products","setProducts","_useState9","_useState10","product","setProduct","total","reduce","accumulator","price","Number","toFixed","host","BaseUrlApi","LoadProducts","_ref2","_asyncToGenerator","response","fetch","data","json","console","error","apply","arguments","getProductByCode","_ref3","code","_x","showToast","type","text1","text2","show","visibilityTime","autoHide","text1Style","fontSize","fontWeight","text2Style","handleAddProductToCart","newProduct","some","prevCartProducts","concat","_toConsumableArray","handleRemoveFromCart","toRemoveProduct","filter","formatToCurrency","value","toLocaleString","style","currency","Provider","useProductContext","context","useContext"],"sources":["/home/dev/Documents/projects/react native/fast-market-react-native-app-main/src/app/contexts/product-context.tsx"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\nimport Toast from 'react-native-toast-message';\nimport Product from '../models/productModel';\n\ninterface ProductContextProps {\n  isScannerAlive: boolean;\n  setIsScannerAlive: React.Dispatch<React.SetStateAction<boolean>>;\n  sumProducts: number;\n  cartProducts: Product[];\n  product: Product | undefined;\n  products: Product[] | undefined;\n  setProduct: React.Dispatch<React.SetStateAction<Product | undefined>>;\n  setProducts: React.Dispatch<React.SetStateAction<Product[] | undefined>>;\n  LoadProducts: () => Promise<Product[] | undefined>;\n  getProductByCode: (code: string) => Promise<Product | undefined>;\n  showToast: (type: 'success' | 'error', text1: string, text2: string) => void;\n  handleAddProductToCart: (newProduct: Product) => void;\n  handleRemoveFromCart: (toRemoveProduct: Product) => void;\n  formatToCurrency: (value: number) => string;\n}\n\nexport const ProductContext = createContext<ProductContextProps>({} as ProductContextProps);\n\nexport default function ProductProvider({ children }: { children: React.ReactNode }) {\n  const [sumProducts, setSumProducts] = useState<number>(0);\n  const [cartProducts, setCartProducts] = useState<Product[]>([]);\n  const [isScannerAlive, setIsScannerAlive] = useState<boolean>(false);\n  const [products, setProducts] = useState<Product[] | undefined>(undefined);\n  const [product, setProduct] = useState<Product | undefined>(undefined);\n\n\n  useEffect(() => {\n    const total: number = cartProducts.reduce((accumulator, product) => accumulator + product.price, 0);\n    setSumProducts(Number(total.toFixed(2)));\n  }, [cartProducts]);\n\n  const host: string = \"http://localhost:3000\";\n  const BaseUrlApi: string = `${host}/product`;\n\n  const LoadProducts = async (): Promise<Product[] | undefined> => {\n    try {\n      const response = await fetch(\"http://localhost:3000/product\");\n      const data = await response.json(); // Cast to Product[]\n      console.error(data);\n      setProducts(data);\n      return products;\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n      setProducts(undefined);\n      return undefined // Handle error by setting products to undefined\n    }\n  };\n\n  useEffect(() => {\n    LoadProducts();\n  }, []);\n  \n  const getProductByCode = async (code: string): Promise<Product | undefined> => {\n    try {\n      const response = await fetch(`${BaseUrlApi}/code/${code}`);\n      const product = await response.json(); // Cast to Product\n      setProduct(product);\n      return product;\n    } catch (error) {\n      console.error(\"Error fetching product by code:\", error);\n      return undefined; // Handle error by returning undefined\n    }\n  };\n\n  const showToast = (type: 'success' | 'error', text1: string, text2: string): void => {\n    Toast.show({\n      type,\n      text1,\n      text2,\n      visibilityTime: 3000,\n      autoHide: true,\n      text1Style: {\n        fontSize: 16,\n        fontWeight: 'bold',\n      },\n      text2Style: {\n        fontSize: 14,\n        fontWeight: '500',\n      },\n    });\n  };\n\n  const handleAddProductToCart = (newProduct: Product): void => {\n    if (cartProducts.some(product => product.code === newProduct.code)) {\n      return showToast('error', 'OPS!', 'Este produto já foi adicionado ao carrinho.');\n    }\n    setCartProducts((prevCartProducts) => [newProduct, ...prevCartProducts]);\n    return showToast('success', 'Sucesso!', 'Produto adicionado ao carrinho!');\n  }\n\n  const handleRemoveFromCart = (toRemoveProduct: Product): void => {\n    setCartProducts((prevCartProducts) =>\n      prevCartProducts.filter((product) => product.code !== toRemoveProduct.code)\n    );\n  };\n\n  const formatToCurrency = (value: number): string => {\n    return value.toLocaleString('pt-BR', {\n      style: 'currency',\n      currency: 'BRL',\n    })\n  };\n\n  return (\n    <ProductContext.Provider value={{\n      isScannerAlive,\n      sumProducts,\n      cartProducts,\n      product,\n      setProduct,\n      products,\n      setProducts,\n      getProductByCode,\n      LoadProducts,\n      setIsScannerAlive,\n      showToast,\n      handleAddProductToCart,\n      handleRemoveFromCart,\n      formatToCurrency,\n    }}>\n      {children}\n    </ProductContext.Provider>\n  );\n};\n\nexport function useProductContext() {\n  const context = React.useContext(ProductContext);\n  return context;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}