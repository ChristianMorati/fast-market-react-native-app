{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { colors, globalStyles } from \"../../../global-styles\";\nimport Ionicons from '@expo/vector-icons/Ionicons';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { useProductContext } from \"../../../contexts/product-context\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar ProductItem = function ProductItem(_ref) {\n  var item = _ref.item;\n  var productContext = useProductContext();\n  return _jsxs(View, {\n    style: styles.productContainer,\n    children: [_jsx(Image, {\n      source: {\n        uri: item == null ? void 0 : item.img\n      },\n      style: styles.image\n    }), _jsx(Text, {\n      style: styles.description,\n      numberOfLines: 2,\n      ellipsizeMode: \"middle\",\n      children: item == null ? void 0 : item.description.toUpperCase()\n    }), _jsxs(View, {\n      style: styles.priceContainer,\n      children: [_jsx(Text, {\n        style: styles.price,\n        children: productContext.formatToCurrency(item == null ? void 0 : item.price)\n      }), productContext.cartProducts.length < 9 ? _jsx(TouchableOpacity, {\n        style: [globalStyles.button, styles.addToCart],\n        onPress: function onPress() {\n          return productContext.handleAddProductToCart(item);\n        },\n        children: _jsx(FontAwesome, {\n          name: \"cart-arrow-down\",\n          size: 16,\n          color: \"white\"\n        })\n      }) : _jsxs(Text, {\n        style: [globalStyles.button, styles.fullCart],\n        children: [_jsx(Ionicons, {\n          name: \"md-cart-outline\",\n          size: 14,\n          color: \"white\"\n        }), \" Cheio\"]\n      })]\n    })]\n  });\n};\nvar FeaturedProducts = function FeaturedProducts() {\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoadingProducts = _useState2[0],\n    setIsLoadingProducts = _useState2[1];\n  var productContext = useProductContext();\n  useEffect(function () {\n    LoadProducts();\n  }, []);\n  var LoadProducts = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var response = yield fetch(\"http://localhost:3000/product\");\n        var data = yield response.json();\n        productContext.setProducts(data);\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n      } finally {\n        setIsLoadingProducts(false);\n      }\n    });\n    return function LoadProducts() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: styles.container,\n    children: [isLoadingProducts && _jsx(Text, {\n      style: {\n        color: 'white'\n      },\n      children: \"is loading\"\n    }), !isLoadingProducts && productContext.products && _jsxs(_Fragment, {\n      children: [_jsx(Text, {\n        style: [styles.title],\n        children: \"Produtos em Destaque\"\n      }), _jsx(View, {\n        style: styles.container,\n        children: _jsx(FlatList, {\n          data: productContext.products,\n          renderItem: function renderItem(_ref3) {\n            var item = _ref3.item;\n            return _jsx(ProductItem, {\n              item: item\n            });\n          },\n          keyExtractor: function keyExtractor(item) {\n            return item.code;\n          },\n          contentContainerStyle: null,\n          numColumns: 2\n        })\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingTop: 6,\n    height: 'auto',\n    paddingHorizontal: 6,\n    paddingBottom: 6\n  },\n  image: {\n    height: 140,\n    resizeMode: 'contain',\n    borderTopRightRadius: 12,\n    borderTopLeftRadius: 12,\n    backgroundColor: 'white'\n  },\n  productContainer: {\n    flex: 1,\n    flexDirection: 'column',\n    backgroundColor: colors.productFooter,\n    margin: 3,\n    paddingBottom: 6,\n    borderRadius: 12,\n    borderWidth: .4,\n    borderColor: 'black'\n  },\n  containerReload: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 16\n  },\n  title: {\n    fontWeight: '500',\n    fontSize: 18,\n    color: colors.title,\n    paddingLeft: 4\n  },\n  description: {\n    fontSize: 11,\n    textAlign: 'center',\n    paddingHorizontal: 2,\n    fontWeight: '500'\n  },\n  priceContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 10,\n    paddingVertical: 4\n  },\n  price: {\n    fontSize: 14,\n    fontWeight: 'bold'\n  },\n  disabledButton: {\n    backgroundColor: 'black'\n  },\n  messageError: {\n    marginLeft: 14,\n    fontWeight: '500',\n    fontSize: 18,\n    color: 'red'\n  },\n  addToCart: {\n    backgroundColor: '#7D0E7C',\n    paddingHorizontal: 12,\n    paddingVertical: 6\n  },\n  fullCart: {\n    backgroundColor: '#7D0E7C',\n    color: 'white'\n  }\n});\nexport default FeaturedProducts;","map":{"version":3,"names":["React","useEffect","useState","View","Text","Image","StyleSheet","TouchableOpacity","FlatList","colors","globalStyles","Ionicons","FontAwesome","useProductContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductItem","_ref","item","productContext","style","styles","productContainer","children","source","uri","img","image","description","numberOfLines","ellipsizeMode","toUpperCase","priceContainer","price","formatToCurrency","cartProducts","length","button","addToCart","onPress","handleAddProductToCart","name","size","color","fullCart","FeaturedProducts","_useState","_useState2","_slicedToArray","isLoadingProducts","setIsLoadingProducts","LoadProducts","_ref2","_asyncToGenerator","response","fetch","data","json","setProducts","error","console","apply","arguments","container","products","title","renderItem","_ref3","keyExtractor","code","contentContainerStyle","numColumns","create","flex","paddingTop","height","paddingHorizontal","paddingBottom","resizeMode","borderTopRightRadius","borderTopLeftRadius","backgroundColor","flexDirection","productFooter","margin","borderRadius","borderWidth","borderColor","containerReload","justifyContent","alignItems","marginTop","fontWeight","fontSize","paddingLeft","textAlign","paddingVertical","disabledButton","messageError","marginLeft"],"sources":["/home/dev/Documents/projects/react native/fast-market-react-native-app-main/src/app/components/products/featured-products/featured-products.tsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { View, Text, Image, StyleSheet, TouchableOpacity, FlatList } from 'react-native';\nimport { colors, globalStyles } from '../../../global-styles';\nimport Product from '../../../models/productModel';\nimport Ionicons from '@expo/vector-icons/Ionicons';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { useProductContext } from '../../../contexts/product-context';\n\n\ninterface ProductItemProps {\n    item: Product;\n}\n\nconst ProductItem: React.FC<ProductItemProps> = ({ item }) => {\n    const productContext = useProductContext();\n\n    return (\n        <View style={styles.productContainer}>\n            <Image\n                source={{ uri: item?.img }}\n                style={styles.image}\n            />\n            <Text style={styles.description} numberOfLines={2} ellipsizeMode=\"middle\">{item?.description.toUpperCase()}</Text>\n            <View style={styles.priceContainer}>\n                <Text style={styles.price}>{productContext.formatToCurrency(item?.price)}</Text>\n\n                {productContext.cartProducts.length < 9 ? (\n                    <TouchableOpacity\n                        style={[globalStyles.button, styles.addToCart]}\n                        onPress={() => productContext.handleAddProductToCart(item)}\n                    >\n                        <FontAwesome name=\"cart-arrow-down\" size={16} color=\"white\" />\n                    </TouchableOpacity>\n                ) : <Text style={[globalStyles.button, styles.fullCart]}>\n                    <Ionicons name=\"md-cart-outline\" size={14} color=\"white\" /> Cheio</Text>}\n            </View>\n        </View>\n    );\n};\n\nconst FeaturedProducts: React.FC = () => {\n    // insert into product(code, description, url_img, unit_price) values (\"12345671\",\"BATATA CONG NOISETTE SADIA PC400GR\",\"https://storage.googleapis.com/phygital_files/mercado-milenio/uploads/produto/batata_cong_noisette_sadia_pc400gr_bc899539-59c7-400c-8f7c-2f2fa085eb7a.png\",23.34),(\"12345672\",\"SABAO DE COCO BARRA 100G\",\"https://storage.googleapis.com/phygital_files/comercial-bambina/uploads/produto/sabao_de_coco_barra_100g_5f4276ff-fbcf-4c17-a080-c3807b6a8991.png\", 3.75),(\"12345673\",\"Macarrão instantâneo luccas neto - sabor carne\",\"https://images-americanas.b2w.io/produtos/3398641894/imagens/macarrao-instantaneo-luccas-neto-sabor-carne-sandella/3398641894_1_large.jpg\",4.99),(\"12345674\",\"MUCILON ARROZ E AVEIA SH360GR\",\"https://storage.googleapis.com/phygital_files/mercado-milenio/uploads/produto/mucilon_arroz_e_aveia_sh360gr_c1ebc0e9-fec9-43cb-b180-7c6be0a8998d.png\",13.99);\n    const [isLoadingProducts, setIsLoadingProducts] = useState(true);\n    const productContext = useProductContext();\n\n    useEffect(() => {\n        LoadProducts();\n    }, []); // Run LoadProducts only once on initial render\n\n    const LoadProducts = async () => {\n        try {\n            const response = await fetch(\"http://localhost:3000/product\");\n            const data = await response.json();\n            productContext.setProducts(data); // Update context state\n        } catch (error) {\n            console.error(\"Error fetching products:\", error);\n            // Handle error appropriately, e.g., display an error message\n        } finally {\n            setIsLoadingProducts(false); // Set loading to false regardless of success or failure\n        }\n    };\n\n    return (\n        <View style={styles.container}>\n            {isLoadingProducts && <Text style={{ color: 'white' }}>is loading</Text>}\n            {!isLoadingProducts && productContext.products && (\n                <>\n                    <Text style={[styles.title]}>Produtos em Destaque</Text>\n                    <View style={styles.container}>\n                        <FlatList\n                            data={productContext.products}\n                            renderItem={({ item }) => <ProductItem item={item} />}\n                            keyExtractor={(item) => item.code}\n                            contentContainerStyle={null}\n                            numColumns={2}\n                        />\n                    </View>\n                </>\n            )}\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        paddingTop: 6,\n        height: 'auto',\n        paddingHorizontal: 6,\n        paddingBottom: 6,\n    },\n    image: {\n        height: 140,\n        resizeMode: 'contain',\n        borderTopRightRadius: 12,\n        borderTopLeftRadius: 12,\n        backgroundColor: 'white',\n    },\n    productContainer: {\n        flex: 1,\n        flexDirection: 'column',\n        backgroundColor: colors.productFooter,\n        margin: 3,\n        paddingBottom: 6,\n        borderRadius: 12,\n        borderWidth: .4,\n        borderColor: 'black',\n    },\n    containerReload: {\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginTop: 16,\n    },\n    title: {\n        fontWeight: '500',\n        fontSize: 18,\n        color: colors.title,\n        paddingLeft: 4,\n    },\n    description: {\n        fontSize: 11,\n        textAlign: 'center',\n        paddingHorizontal: 2,\n        fontWeight: '500',\n    },\n    priceContainer: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        paddingHorizontal: 10,\n        paddingVertical: 4,\n    },\n    price: {\n        fontSize: 14,\n        fontWeight: 'bold',\n    },\n    disabledButton: {\n        backgroundColor: 'black',\n    },\n    messageError: {\n        marginLeft: 14,\n        fontWeight: '500',\n        fontSize: 18,\n        color: 'red',\n    },\n    addToCart: {\n        backgroundColor: '#7D0E7C',\n        paddingHorizontal: 12,\n        paddingVertical: 6\n    },\n    fullCart: {\n        backgroundColor: '#7D0E7C',\n        color: 'white',\n    }\n});\n\nexport default FeaturedProducts;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}